# ValutaTrade Hub

> üé¨ **–í–∏–¥–µ–æ-–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è:** [–°–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–∏—Å—å asciinema](https://asciinema.org/a/7GMaFm8SczspBmEr)

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

ValutaTrade Hub ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ —Å–∏–º—É–ª—è—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤–∞–ª—é—Ç–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Ñ–∏–∞—Ç–Ω—ã—Ö –∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, —Å–æ–≤–µ—Ä—à–∞—Ç—å —Å–¥–µ–ª–∫–∏ –ø–æ –ø–æ–∫—É–ø–∫–µ/–ø—Ä–æ–¥–∞–∂–µ, –∞ —Ç–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

1. **Parser Service** ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø—É–±–ª–∏—á–Ω—ã–º API (CoinGecko –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, ExchangeRate-API –¥–ª—è —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç), –ø–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã, —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∏—Ö —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

2. **Core Service** ‚Äî –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (CLI), —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∏—Ö –∫–æ—à–µ–ª—å–∫–∞–º–∏, –∏—Å—Ç–æ—Ä–∏–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —Å–µ—Ä–≤–∏—Å–æ–º –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```
finalproject_sasmsonov_m25_555/
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ users.json              # —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ portfolios.json         # –ø–æ—Ä—Ç—Ñ–µ–ª–∏ –∏ –∫–æ—à–µ–ª—å–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ rates.json              # –∫—ç—à —Ç–µ–∫—É—â–∏—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
‚îÇ   ‚îî‚îÄ‚îÄ exchange_rates.json     # –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫—É—Ä—Å–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ actions.log             # –ª–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ valutatrade_hub.log     # –æ–±—â–∏–π –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ valutatrade_hub/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ logging_config.py       # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ decorators.py           # –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (@log_action)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py           # –∫–ª–∞—Å—Å—ã User, Wallet, Portfolio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currencies.py       # –∫–ª–∞—Å—Å—ã Currency, FiatCurrency, CryptoCurrency
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py       # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ usecases.py        # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (buy, sell, get-rate)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.py            # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ infra/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py         # Singleton SettingsLoader (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py         # Singleton DatabaseManager (—Ä–∞–±–æ—Ç–∞ —Å JSON)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ parser_service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_clients.py      # —Ä–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ updater.py          # –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.py          # –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ exchange_rates.json
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ cli/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ interface.py        # –∫–æ–º–∞–Ω–¥—ã CLI
‚îÇ
‚îú‚îÄ‚îÄ main.py                     # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Makefile                    # –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ pyproject.toml             # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry
‚îú‚îÄ‚îÄ poetry.lock                # –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ api_key.txt                # API-–∫–ª—é—á –¥–ª—è ExchangeRate-API (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
‚îî‚îÄ‚îÄ README.md                  # —ç—Ç–æ—Ç —Ñ–∞–π–ª
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
make install
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç `poetry install`, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `pyproject.toml`.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12 –∏–ª–∏ –≤—ã—à–µ
- Poetry (—Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)

## –ó–∞–ø—É—Å–∫

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∏–∑ –∫–æ–º–∞–Ω–¥:

```bash
make project
```

–∏–ª–∏

```bash
poetry run project
```

–û–±–µ –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞—é—Ç –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª CLI, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

## –ö–æ–º–∞–Ω–¥—ã CLI

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
> register --username alice --password 1234
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 'alice' –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω (id=3). –í–æ–π–¥–∏—Ç–µ: login --username alice --password ****
```

**–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É:**
```bash
> login --username alice --password 1234
–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ 'alice'
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è

**–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å (–±–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞ USD –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
```bash
> show-portfolio
–ü–æ—Ä—Ç—Ñ–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 'alice' (–±–∞–∑–∞: USD):
- USD: 150.00  ‚Üí 150.00 USD
- BTC: 0.0500  ‚Üí 2965.00 USD
- EUR: 200.00  ‚Üí 214.00 USD
---------------------------------
–ò–¢–û–ì–û: 3,329.00 USD
```

**–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å —Å –¥—Ä—É–≥–æ–π –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç–æ–π:**
```bash
> show-portfolio --base EUR
–ü–æ—Ä—Ç—Ñ–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 'alice' (–±–∞–∑–∞: EUR):
- USD: 150.00  ‚Üí 139.05 EUR
- BTC: 0.0500  ‚Üí 2749.30 EUR
- EUR: 200.00  ‚Üí 200.00 EUR
---------------------------------
–ò–¢–û–ì–û: 3,088.35 EUR
```

### –ü–æ–∫—É–ø–∫–∞ –∏ –ø—Ä–æ–¥–∞–∂–∞ –≤–∞–ª—é—Ç—ã

**–ü–æ–∫—É–ø–∫–∞ –≤–∞–ª—é—Ç—ã:**
```bash
> buy --currency BTC --amount 0.05
–ü–æ–∫—É–ø–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: 0.0500 BTC –ø–æ –∫—É—Ä—Å—É 59300.00 USD/BTC
–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ:
- BTC: –±—ã–ª–æ 0.0000 ‚Üí —Å—Ç–∞–ª–æ 0.0500
- USD: –±—ã–ª–æ 3000.00 ‚Üí —Å—Ç–∞–ª–æ 35.00
–û—Ü–µ–Ω–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏: 2,965.00 USD
```

**–ü—Ä–æ–¥–∞–∂–∞ –≤–∞–ª—é—Ç—ã:**
```bash
> sell --currency BTC --amount 0.01
–ü—Ä–æ–¥–∞–∂–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: 0.0100 BTC –ø–æ –∫—É—Ä—Å—É 59800.00 USD/BTC
–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ:
- BTC: –±—ã–ª–æ 0.0500 ‚Üí —Å—Ç–∞–ª–æ 0.0400
- USD: –±—ã–ª–æ 35.00 ‚Üí —Å—Ç–∞–ª–æ 633.00
–û—Ü–µ–Ω–æ—á–Ω–∞—è –≤—ã—Ä—É—á–∫–∞: 598.00 USD
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç

**–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç—ã –∫ –¥—Ä—É–≥–æ–π:**
```bash
> get-rate --from USD --to BTC
–ö—É—Ä—Å USD‚ÜíBTC: 0.00001685 (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-10-09 00:03:22)
–û–±—Ä–∞—Ç–Ω—ã–π –∫—É—Ä—Å BTC‚ÜíUSD: 59337.21
```

**–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã:**
```bash
> show-rates
Rates from cache (updated at 2025-10-10T15:30:00):
- BTC_USD: 59337.21
- ETH_USD: 3720.00
- EUR_USD: 1.0786
- GBP_USD: 1.2623
- RUB_USD: 0.01016
```

**–ü–æ–∫–∞–∑–∞—Ç—å –∫—É—Ä—Å—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–∞–ª—é—Ç—ã:**
```bash
> show-rates --currency BTC
Rates from cache (updated at 2025-10-10T15:30:00):
- BTC_USD: 59337.21
```

**–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ø N —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç:**
```bash
> show-rates --top 2
Rates from cache (updated at 2025-10-10T15:30:00):
- BTC_USD: 59337.21
- ETH_USD: 3720.00
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤

**–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç:**
```bash
> update-rates
INFO: Starting rates update...
INFO: Fetching from CoinGecko... OK (3 rates)
INFO: Fetching from ExchangeRate-API... OK (3 rates)
INFO: Writing 6 rates to data/rates.json...
Update successful. Total rates updated: 6. Last refresh: 2025-10-10T15:30:00
```

**–û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã —Ç–æ–ª—å–∫–æ –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞:**
```bash
> update-rates --source coingecko
INFO: Starting rates update...
INFO: Fetching from CoinGecko... OK (3 rates)
Update successful. Total rates updated: 3. Last refresh: 2025-10-10T15:30:00
```

## –ö—ç—à –∏ TTL (Time To Live)

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ API.

### –§–æ—Ä–º–∞—Ç –∫—ç—à–∞

–ö—É—Ä—Å—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `data/rates.json` –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "pairs": {
    "EUR_USD": {
      "rate": 1.0786,
      "updated_at": "2025-10-10T12:00:00Z",
      "source": "ExchangeRate-API"
    },
    "BTC_USD": {
      "rate": 59337.21,
      "updated_at": "2025-10-10T12:00:00Z",
      "source": "CoinGecko"
    }
  },
  "last_refresh": "2025-10-10T12:00:01Z"
}
```

### TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é TTL –¥–ª—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)**. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `pyproject.toml`:

```toml
[tool.valutatrade]
rates_ttl_seconds = 3600  # 1 —á–∞—Å
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –∫—É—Ä—Å –≤ –∫—ç—à–µ —Å—Ç–∞—Ä—à–µ TTL, —Å–∏—Å—Ç–µ–º–∞:
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ —Ç–æ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–ª–∏
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `update-rates` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ

### –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

–í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `data/exchange_rates.json` –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –¥–∏–Ω–∞–º–∏–∫–∏ –∫—É—Ä—Å–æ–≤.

## Parser Service

Parser Service ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API.

### –í–∫–ª—é—á–µ–Ω–∏–µ Parser Service

Parser Service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã CLI:
- `update-rates` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤
- `show-rates` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—É—Ä—Å—ã –∏–∑ –∫—ç—à–∞

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

1. **CoinGecko** ‚Äî –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç (BTC, ETH, SOL –∏ –¥—Ä.)
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç API-–∫–ª—é—á–∞
   - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∑–∞–ø—Ä–æ—Å–æ–≤

2. **ExchangeRate-API** ‚Äî –¥–ª—è —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç (EUR, GBP, RUB –∏ –¥—Ä.)
   - –¢—Ä–µ–±—É–µ—Ç API-–∫–ª—é—á–∞
   - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ [exchangerate-api.com](https://www.exchangerate-api.com/)

### –•—Ä–∞–Ω–µ–Ω–∏–µ API-–∫–ª—é—á–∞

API-–∫–ª—é—á –¥–ª—è ExchangeRate-API —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `api_key.txt` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```
[–≤–∞—à –∫–ª—é—á]
```

**–í–∞–∂–Ω–æ:**
- –§–∞–π–ª `api_key.txt` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` –∏ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –∫–ª—é—á–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `api_key.txt`
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `EXCHANGERATE_API_KEY`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API-–∫–ª—é—á–∞

1. –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API-–∫–ª—é—á –Ω–∞ [exchangerate-api.com](https://www.exchangerate-api.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `api_key.txt` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à API-–∫–ª—é—á –≤ —Ñ–∞–π–ª (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)

–ü—Ä–∏–º–µ—Ä:
```bash
echo "–≤–∞—à_api_–∫–ª—é—á_–∑–¥–µ—Å—å" > api_key.txt
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í–º–µ—Å—Ç–æ —Ñ–∞–π–ª–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
export EXCHANGERATE_API_KEY="–≤–∞—à_api_–∫–ª—é—á_–∑–¥–µ—Å—å"
poetry run project
```

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è, –æ–Ω–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ —Ñ–∞–π–ª–æ–º `api_key.txt`.
